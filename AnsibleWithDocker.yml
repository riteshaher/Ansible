  - hosts: all
    vars: 
            - url: "https://download.docker.com/linux/centos/7/x86_64/stable/"
    tasks:
            - name: Creation of yum repo in cloud
              yum_repository:
                name: RiteshDocker
                baseurl: "{{ url }}"
                description : My docker repository
                gpgcheck: 0

            - name: Installation of docker On managed node
              package:
                name: "docker-ce-18.09.1-3.el7.x86_64"
                state: present

            - name: Starting docker  Service permanently
              service:
                name: docker
                state: started
                enabled: yes

            - name: Pulling httpd image from docker reposiorty
              docker_image:
                name: httpd
                source: pull

            - name: creating a folder 
              file:
                path: /root/mywebpage
                state: directory

            - name: Copy html file form controller node to managed node
              copy:
                src: "index.html"
                dest: "/root/mywebpage/"
